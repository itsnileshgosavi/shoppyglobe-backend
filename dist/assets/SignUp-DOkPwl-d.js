import{r as t,e as v,b as S,j as e,l as E,L as C,J as a}from"./index-DFTzDPpZ.js";import{S as F}from"./Spinner-eoPve_cN.js";import{F as L}from"./Failure-BMhBOfnm.js";const R=()=>{const[n,r]=t.useState(null),[u,f]=t.useState(""),[x,h]=t.useState(""),[i,y]=t.useState(""),[d,w]=t.useState(""),m=v(),{user:p}=S(s=>s.user),[g,b]=t.useState(!1);t.useEffect(()=>{p.id!==0&&m("/")},[p,m]);const j=async s=>{s.preventDefault();try{const l=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,N=/^(?=.*[A-Z])(?=.*[a-z]).{6,}$/;if(u.trim()===""||x.trim()===""||i.trim()===""||d.trim()===""){a.error("All fields are required"),r("All fields are required");return}else if(l.test(i)){if(!N.test(d)){a.error("Password must be at least 6 characters long and contain at least one uppercase letter, one lowercase letter, one number"),r("Password must be at least 6 characters long and contain at least one uppercase letter, one lowercase letter, one number");return}}else{a.error("Invalid email address"),r("Invalid email address");return}b(!0);const c=await fetch("./api/user/register",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:u,lastName:x,email:i,password:d})});if(c.ok){const o=await c.json();a.success(o.message),m("/signin")}else{const o=await c.json();throw a.error(o.message),r(o.message),new Error(o.message)}}catch(l){console.log(l),r(l.message),a.error(l.message)}finally{b(!1)}};return e.jsx("div",{className:"flex items-center justify-center min-h-screen w-full px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex items-center justify-center w-full max-w-md",children:e.jsx("div",{className:"bg-gray-300 shadow-xl shadow-gray-700/50 rounded-2xl transition-all duration-200 w-full",children:e.jsxs("form",{onSubmit:s=>{j(s)},className:"mx-auto flex items-center space-y-4 py-8 sm:py-12 lg:py-16 px-6 sm:px-8 lg:px-12 font-semibold text-gray-900 flex-col w-full",children:[e.jsx("img",{src:E,alt:"logo",className:"w-32 sm:w-40 lg:w-48"}),e.jsx("h1",{className:"text-black text-lg sm:text-xl lg:text-2xl",children:"Register to ShoppyGlobe"}),e.jsx("input",{className:"w-full p-2 sm:p-3 bg-slate-300 placeholder:text-gray-600 rounded-md border border-gray-700 focus:border-blue-700 hover:border-blue-500 transition-all duration-200 text-sm sm:text-base",placeholder:"First Name",type:"text",name:"firstName",onChange:s=>f(s.target.value)}),e.jsx("input",{className:"w-full p-2 sm:p-3 bg-slate-300 placeholder:text-gray-600 rounded-md border border-gray-700 focus:border-blue-700 hover:border-blue-500 transition-all duration-200 text-sm sm:text-base",placeholder:"Last Name",type:"text",name:"firstName",onChange:s=>h(s.target.value)}),e.jsx("input",{className:"w-full p-2 sm:p-3 bg-slate-300 placeholder:text-gray-600 rounded-md border border-gray-700 focus:border-blue-700 hover:border-blue-500 transition-all duration-200 text-sm sm:text-base",placeholder:"Email",type:"email",name:"email",onChange:s=>y(s.target.value)}),e.jsx("input",{className:"w-full p-2 sm:p-3 bg-slate-300 placeholder:text-gray-600 rounded-md border border-gray-700 focus:border-blue-700 hover:border-blue-500 transition-all duration-200 text-sm sm:text-base",placeholder:"Password",type:"password",name:"password",onChange:s=>w(s.target.value)}),n&&e.jsx("p",{className:"text-red-500 text-sm sm:text-base text-wrap",children:n}),e.jsx("button",{className:"w-full flex items-center justify-center p-2 sm:p-3 bg-gray-50 rounded-full font-bold text-gray-900 border-[4px] border-gray-700 hover:scale-105 active:scale-95 transition-all duration-200 text-sm sm:text-base",type:"submit",disabled:g,children:g?e.jsx(F,{}):e.jsx(e.Fragment,{children:n?e.jsx(L,{message:"Sign Up"}):"Sign Up"})}),e.jsxs("p",{className:"text-black text-sm sm:text-base",children:["Already have an account?",e.jsx(C,{className:"font-semibold text-red-500 hover:text-red-700 transition-all duration-200",to:"/signin",children:e.jsx("span",{className:"hover:text-red-500 transition-all duration-200 hover:scale-105 mx-2",children:"Sign in"})})]})]})})})})};export{R as default};
