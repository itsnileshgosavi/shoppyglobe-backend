import{r as t,e as b,b as y,u as j,j as e,l as S,L as v,J as d,s as w}from"./index-DrAFe7Km.js";import{S as N}from"./Spinner-BKdkn9ul.js";import{F as E}from"./Failure-C-13t_9O.js";const D=()=>{const[o,u]=t.useState(null),[m,x]=t.useState(""),[g,p]=t.useState(""),[l,i]=t.useState(!1),n=b(),{user:c}=y(s=>s.user),h=j();t.useEffect(()=>{c.id!==0&&n("/")},[c,n]);const f=async s=>{s.preventDefault();try{i(!0);const a=await fetch("./api/user/signin",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:m,password:g})}),r=await a.json();if(a.ok)console.log(r.user),d.success(r.message),h(w(r.user)),n("/");else throw new Error(r.message)}catch(a){console.log(a.message),d.error(a.message),u(a.message)}finally{i(!1)}};return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"bg-gray-300 shadow-xl shadow-gray-700/50 rounded-2xl transition-all duration-200",children:e.jsxs("form",{onSubmit:s=>{f(s)},className:"mx-auto flex items-center space-y-4 py-16 px-12 font-semibold text-white flex-col",children:[e.jsx("img",{src:S,alt:"logo"}),e.jsx("h1",{className:"text-black text-xl",children:"Sign in to ShoppyGlobe"}),e.jsx("input",{className:"w-full p-2 bg-slate-300 placeholder:text-gray-600 rounded-md border border-gray-700 focus:border-blue-700 hover:border-blue-500 transition-all duration-200",placeholder:"Email",type:"email",name:"email",onChange:s=>x(s.target.value)}),e.jsx("input",{className:"w-full p-2 bg-slate-300 placeholder:text-gray-600 rounded-md border border-gray-700 focus:border-blue-700 hover:border-red-500 transition-all duration-200",placeholder:"Password",type:"password",name:"password",onChange:s=>p(s.target.value)}),o&&e.jsx("p",{className:"text-red-500",children:o}),e.jsx("button",{className:"w-full flex items-center justify-center p-2 bg-gray-50 rounded-full font-bold text-gray-900 border-[4px] border-gray-700 hover:scale-105 active:scale-95 transition-all duration-200",type:"submit",disabled:l,children:l?e.jsx(N,{}):e.jsx(e.Fragment,{children:o?e.jsx(E,{message:"Sign In"}):"Sign In"})}),e.jsxs("p",{className:"text-black",children:["Don't have an account?",e.jsx(v,{className:"font-semibold text-red-500 hover:text-red-700 transition-all duration-200",to:"/signup",children:e.jsx("span",{className:"hover:text-red-500 transition-all duration-200 hover:scale-105 mx-2",children:"Sign up"})})]})]})})})})};export{D as default};
