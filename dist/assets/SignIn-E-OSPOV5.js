import{r as a,e as b,b as y,u as j,j as e,l as w,L as S,J as d,s as v}from"./index-CKoJBAVW.js";import{S as N}from"./Spinner-BaS6tvGz.js";import{F as E}from"./Failure-lxyNqQ2Q.js";const D=()=>{const[l,m]=a.useState(null),[x,u]=a.useState(""),[p,g]=a.useState(""),[n,i]=a.useState(!1),o=b(),{user:c}=y(s=>s.user),h=j();a.useEffect(()=>{c.id!==0&&o("/")},[c,o]);const f=async s=>{s.preventDefault();try{i(!0);const t=await fetch("./api/user/signin",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:x,password:p})}),r=await t.json();if(t.ok)console.log(r.user),d.success(r.message),h(v(r.user)),o("/");else throw new Error(r.message)}catch(t){console.log(t.message),d.error(t.message),m(t.message)}finally{i(!1)}};return e.jsx("div",{className:"flex items-center justify-center min-h-screen w-full px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex items-center justify-center w-full max-w-md",children:e.jsx("div",{className:"bg-gray-300 shadow-xl shadow-gray-700/50 rounded-2xl transition-all duration-200 w-full",children:e.jsxs("form",{onSubmit:s=>{f(s)},className:"mx-auto flex items-center space-y-4 py-8 sm:py-12 lg:py-16 px-6 sm:px-8 lg:px-12 font-semibold text-white flex-col w-full",children:[e.jsx("img",{src:w,alt:"logo",className:"w-32 sm:w-40 lg:w-48"}),e.jsx("h1",{className:"text-black text-lg sm:text-xl lg:text-2xl",children:"Sign in to ShoppyGlobe"}),e.jsx("input",{className:"w-full p-2 sm:p-3 bg-slate-300 placeholder:text-gray-600 rounded-md border border-gray-700 focus:border-blue-700 hover:border-blue-500 transition-all duration-200 text-sm sm:text-base",placeholder:"Email",type:"email",name:"email",onChange:s=>u(s.target.value)}),e.jsx("input",{className:"w-full p-2 sm:p-3 bg-slate-300 placeholder:text-gray-600 rounded-md border border-gray-700 focus:border-blue-700 hover:border-red-500 transition-all duration-200 text-sm sm:text-base",placeholder:"Password",type:"password",name:"password",onChange:s=>g(s.target.value)}),l&&e.jsx("p",{className:"text-red-500 text-sm sm:text-base",children:l}),e.jsx("button",{className:"w-full flex items-center justify-center p-2 sm:p-3 bg-gray-50 rounded-full font-bold text-gray-900 border-[4px] border-gray-700 hover:scale-105 active:scale-95 transition-all duration-200 text-sm sm:text-base",type:"submit",disabled:n,children:n?e.jsx(N,{}):e.jsx(e.Fragment,{children:l?e.jsx(E,{message:"Sign In"}):"Sign In"})}),e.jsxs("p",{className:"text-black text-sm sm:text-base",children:["Don't have an account?",e.jsx(S,{className:"font-semibold text-red-500 hover:text-red-700 transition-all duration-200",to:"/signup",children:e.jsx("span",{className:"hover:text-red-500 transition-all duration-200 hover:scale-105 mx-2",children:"Sign up"})})]})]})})})})};export{D as default};
