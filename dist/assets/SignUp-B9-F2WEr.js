import{r,e as w,b as S,j as e,l as E,L as k,J as t}from"./index-CRm8rBuv.js";import{S as C,F}from"./Failure-DbmKWnVO.js";const A=()=>{const[n,s]=r.useState(null),[m,h]=r.useState(""),[g,f]=r.useState(""),[i,y]=r.useState(""),[d,j]=r.useState(""),c=w(),{user:p}=S(a=>a.user),[x,b]=r.useState(!1);r.useEffect(()=>{p.id!==0&&c("/")},[p,c]);const N=async a=>{a.preventDefault();try{const l=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,v=/^(?=.*[A-Z])(?=.*[a-z]).{6,}$/;if(m.trim()===""||g.trim()===""||i.trim()===""||d.trim()===""){t.error("All fields are required"),s("All fields are required");return}else if(l.test(i)){if(!v.test(d)){t.error("Password must be at least 6 characters long and contain at least one uppercase letter, one lowercase letter, one number"),s("Password must be at least 6 characters long and contain at least one uppercase letter, one lowercase letter, one number");return}}else{t.error("Invalid email address"),s("Invalid email address");return}b(!0);const u=await fetch("https://shoppyglobe-backend.nileshgosavi.tech/api/user/register",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:m,lastName:g,email:i,password:d})});if(u.ok){const o=await u.json();t.success(o.message),c("/signin")}else{const o=await u.json();throw t.error(o.message),s(o.message),new Error(o.message)}}catch(l){console.log(l),s(l.message),t.error(l.message)}finally{b(!1)}};return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"bg-gray-400  rounded-2xl  transition-all duration-200",children:e.jsxs("form",{onSubmit:a=>{N(a)},className:"mx-auto flex items-center space-y-4 py-16 px-12 font-semibold text-gray-900 flex-col",children:[e.jsx("img",{src:E,alt:"logo"}),e.jsx("h1",{className:"text-black text-xl",children:"Register to ShoppyGlobe"}),e.jsx("input",{className:"w-full p-2 bg-slate-300 rounded-md border border-gray-700 focus:border-blue-700 placeholder:text-gray-600 hover:border-blue-500 transition-all duration-200",placeholder:"First Name",type:"text",name:"firstName",onChange:a=>h(a.target.value)}),e.jsx("input",{className:"w-full p-2 bg-slate-300 rounded-md border border-gray-700 focus:border-blue-700 placeholder:text-gray-600 hover:border-blue-500 transition-all duration-200",placeholder:"Last Name",type:"text",name:"firstName",onChange:a=>f(a.target.value)}),e.jsx("input",{className:"w-full p-2 bg-slate-300 rounded-md border border-gray-700 focus:border-blue-700 placeholder:text-gray-600 hover:border-blue-500 transition-all duration-200",placeholder:"Email",type:"email",name:"email",onChange:a=>y(a.target.value)}),e.jsx("input",{className:"w-full p-2 bg-slate-300 rounded-md border border-gray-700 focus:border-blue-700 placeholder:text-gray-600  transition-all duration-200",placeholder:"Password",type:"password",name:"password",onChange:a=>j(a.target.value)}),n&&e.jsx("p",{className:"text-red-500 text-wrap",children:n}),e.jsx("button",{className:"w-full p-2 flex items-center justify-center bg-gray-50 rounded-full font-bold text-gray-900 border-[4px] border-gray-700 hover:scale-105 active:scale-95 transition-all duration-200",type:"submit",disabled:x,children:x?e.jsx(C,{}):e.jsx(e.Fragment,{children:n?e.jsx(F,{message:"Sign Up"}):"Sign Up"})}),e.jsxs("p",{className:"text-black",children:["Already have an account?",e.jsx(k,{className:"font-semibold text-red-500 hover:text-red-700 transition-all duration-200",to:"/signin",children:e.jsx("span",{className:"hover:text-red-500 transition-all duration-200 hover:scale-105 mx-2",children:"Sign in"})})]})]})})})})};export{A as default};
